/* eslint-disable @typescript-eslint/no-unused-vars */
import { BitfinexCandle } from '../types'
import { aggregateCandlesBackward } from './aggregateCandlesBackward'

const oneHourCandlesV2: BitfinexCandle[] = [
  [1671735600000, 16616, 16616, 16616, 16616, 0.0054611799999999995],
  [1671732000000, 16588, 16616, 16618, 16571, 4.93685971],
  [1671728400000, 16661, 16590, 16662, 16572, 12.89393152],
  [1671724800000, 16634, 16660, 16664, 16627, 6.54284658],
  [1671721200000, 16669, 16634, 16709, 16621, 13.47486497],
  [1671717600000, 16781, 16672, 16787, 16650, 16.87634013],
  [1671714000000, 16816, 16782, 16822, 16769, 21.80029232],
  [1671710400000, 16835, 16816, 16842, 16816, 9.52698432],
  // [1671706800000, 16823, 16834, 16840, 16819, 13.34145868],
  // [1671703200000, 16843, 16823, 16856, 16822, 2.66490691],
  // [1671699600000, 16835, 16843, 16867, 16826, 6.76508454],
  // [1671696000000, 16826, 16834, 16848, 16804, 5.03685899],
  // [1671692400000, 16807, 16826, 16826, 16789, 12.25152568],
  // [1671688800000, 16821, 16807, 16823, 16798, 2.00659523],
  // [1671685200000, 16840, 16824, 16841, 16820, 8.14474695],
  // [1671681600000, 16853, 16840, 16855, 16840, 1.04048168],
]

const expected4HourCandles: BitfinexCandle[] = [
  [1671724800000, 16634, 16616, 16664, 16571, 24.37909899],
  [1671710400000, 16835, 16634, 16842, 16621, 61.67848174],
]

describe('aggregateCandles', () => {
  it('should build 4H candles from 1H candles', () => {
    const candles = aggregateCandlesBackward(oneHourCandlesV2)

    expect(candles).toEqual(expected4HourCandles)
  })
})
